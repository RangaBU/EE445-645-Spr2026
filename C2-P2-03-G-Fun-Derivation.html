<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extinction Coefficient: Two Ways to Count</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: #f7f5f0;
    font-family: 'Times New Roman', Times, serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 24px;
  }

  .container {
    width: 1160px;
    max-width: 100%;
  }

  .panels {
    display: flex;
    gap: 28px;
    margin-bottom: 24px;
  }

  .panel {
    flex: 1;
    background: #fff;
    border-radius: 6px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08), 0 4px 16px rgba(0,0,0,0.04);
    overflow: hidden;
  }

  .panel-header {
    padding: 16px 20px 10px;
    text-align: center;
  }

  .panel-title {
    font-family: 'Times New Roman', Times, serif;
    font-size: 22px;
    font-weight: 700;
    color: #1a1a1a;
    line-height: 1.3;
  }

  .panel-body {
    padding: 0 12px 12px;
  }

  .equation-bar {
    text-align: center;
    padding: 14px 16px;
    margin: 0 8px 10px;
    background: #fafaf7;
    border-radius: 4px;
    border: 1px solid #e8e6e0;
  }

  .equation-bar .eq-text {
    font-family: 'Times New Roman', Times, serif;
    font-size: 19px;
    color: #222;
    line-height: 1.6;
  }

  .equation-bar .eq-text .highlight-green { color: #2c5f2d; font-weight: 700; }
  .equation-bar .eq-text .highlight-blue { color: #065a82; font-weight: 700; }

  .sigma-inline {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    vertical-align: middle;
    line-height: 1;
    margin: 0 3px;
    position: relative;
    top: -2px;
  }
  .sigma-inline .sigma-top {
    font-size: 13px;
    line-height: 1;
    font-style: italic;
  }
  .sigma-inline .sigma-sym {
    font-size: 28px;
    line-height: 0.85;
  }
  .sigma-inline .sigma-bot {
    font-size: 12px;
    line-height: 1;
    font-style: italic;
  }

  .int-inline {
    display: inline-flex;
    flex-direction: column;
    align-items: center;
    vertical-align: middle;
    line-height: 1;
    margin: 0 2px;
    position: relative;
    top: -2px;
  }
  .int-inline .int-top {
    font-size: 12px;
    line-height: 1;
    visibility: hidden;
  }
  .int-inline .int-sym {
    font-size: 28px;
    line-height: 0.85;
  }
  .int-inline .int-bot {
    font-size: 12px;
    line-height: 1;
  }

  .caption-box {
    background: #fff;
    border-radius: 6px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.08), 0 4px 16px rgba(0,0,0,0.04);
    padding: 20px 26px;
  }

  .caption-label {
    font-family: 'Times New Roman', Times, serif;
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: #888;
    margin-bottom: 8px;
  }

  .caption-text {
    font-family: 'Times New Roman', Times, serif;
    font-size: 18px;
    line-height: 1.55;
    color: #222;
  }

  .caption-text strong { font-weight: 700; }
  .caption-text .green { color: #2c5f2d; font-weight: 700; }
  .caption-text .blue { color: #065a82; font-weight: 700; }

  svg text {
    font-family: 'Times New Roman', Times, serif;
  }
</style>
</head>
<body>
<div class="container">

<div class="panels">

<!-- ====================== LEFT PANEL ====================== -->
<div class="panel">
  <div class="panel-header">
    <div class="panel-title">Sum over <em>N</em> Leaf Elements</div>
  </div>
  <div class="panel-body">
    <svg viewBox="0 0 500 430" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="arrowBeamA" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
          <path d="M0,0 L8,3 L0,6 Z" fill="#c8a415"/>
        </marker>
        <marker id="arrowNormA" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
          <path d="M0,0 L7,2.5 L0,5 Z" fill="#ffffff"/>
        </marker>
        <linearGradient id="shadowPlaneA" x1="0" y1="0" x2="0" y2="1">
          <stop offset="0%" stop-color="#c49562" stop-opacity="0.35"/>
          <stop offset="100%" stop-color="#c49562" stop-opacity="0.08"/>
        </linearGradient>
        <radialGradient id="volBgA" cx="50%" cy="40%" r="55%">
          <stop offset="0%" stop-color="#1a2e1a" stop-opacity="0.92"/>
          <stop offset="100%" stop-color="#0d170d" stop-opacity="0.97"/>
        </radialGradient>
      </defs>

      <!-- Photon beam -->
      <line x1="345" y1="18" x2="345" y2="72" stroke="#c8a415" stroke-width="2.2" marker-end="url(#arrowBeamA)"/>
      <line x1="365" y1="18" x2="365" y2="72" stroke="#c8a415" stroke-width="2.2" marker-end="url(#arrowBeamA)"/>
      <line x1="385" y1="18" x2="385" y2="72" stroke="#c8a415" stroke-width="2.2" marker-end="url(#arrowBeamA)"/>
      <text x="403" y="34" font-size="20" font-weight="700" fill="#b8940f">&#937;</text>

      <!-- Volume box -->
      <path d="M185,88 L445,88 L445,300 L185,300 Z" fill="url(#volBgA)" stroke="#3a5a3a" stroke-width="1.2"/>
      <path d="M185,88 L225,68 L485,68 L445,88 Z" fill="#1e3a1e" stroke="#3a5a3a" stroke-width="1" opacity="0.7"/>
      <path d="M445,88 L485,68 L485,280 L445,300 Z" fill="#152a15" stroke="#3a5a3a" stroke-width="1" opacity="0.6"/>

      <!-- Leaf 1 -->
      <g transform="translate(240,130) rotate(-25)">
        <ellipse cx="0" cy="0" rx="22" ry="8" fill="#4a9e4a" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-8" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10" dy="2">1</tspan></text>
      </g>
      <line x1="240" y1="130" x2="224" y2="98" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>
      <text x="198" y="95" font-size="14" fill="#ffffff" font-weight="700">&#937;<tspan font-size="10" dy="3">L1</tspan></text>

      <!-- Leaf 2 -->
      <g transform="translate(340,145) rotate(15)">
        <ellipse cx="0" cy="0" rx="20" ry="7" fill="#5aad5a" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-8" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10" dy="2">2</tspan></text>
      </g>
      <line x1="340" y1="145" x2="330" y2="108" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>
      <text x="306" y="105" font-size="14" fill="#ffffff" font-weight="700">&#937;<tspan font-size="10" dy="3">L2</tspan></text>

      <!-- Leaf 3 -->
      <g transform="translate(280,190) rotate(-50)">
        <ellipse cx="0" cy="0" rx="18" ry="7" fill="#3d8e3d" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-8" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10" dy="2">3</tspan></text>
      </g>
      <line x1="280" y1="190" x2="254" y2="158" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>
      <text x="228" y="155" font-size="14" fill="#ffffff" font-weight="700">&#937;<tspan font-size="10" dy="3">L3</tspan></text>

      <!-- Leaf 4 -->
      <g transform="translate(400,180) rotate(40)">
        <ellipse cx="0" cy="0" rx="19" ry="7" fill="#4a9e4a" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-8" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10" dy="2">4</tspan></text>
      </g>
      <line x1="400" y1="180" x2="420" y2="146" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>
      <text x="424" y="147" font-size="14" fill="#ffffff" font-weight="700">&#937;<tspan font-size="10" dy="3">L4</tspan></text>

      <!-- Leaf 5 -->
      <g transform="translate(310,238) rotate(-10)">
        <ellipse cx="0" cy="0" rx="21" ry="7" fill="#5aad5a" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-8" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10" dy="2">5</tspan></text>
      </g>
      <line x1="310" y1="238" x2="306" y2="207" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>

      <!-- Leaf 6 -->
      <g transform="translate(370,260) rotate(-35)">
        <ellipse cx="0" cy="0" rx="17" ry="6" fill="#3d8e3d" fill-opacity="0.85" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-7" y="4" font-size="12" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="9" dy="2">6</tspan></text>
      </g>
      <line x1="370" y1="260" x2="354" y2="232" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>

      <!-- Leaf 7 -->
      <g transform="translate(240,262) rotate(28)">
        <ellipse cx="0" cy="0" rx="16" ry="6" fill="#4a9e4a" fill-opacity="0.7" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-7" y="4" font-size="12" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="9" dy="2">7</tspan></text>
      </g>

      <!-- Dots + N label -->
      <text x="412" y="250" font-size="22" fill="rgba(255,255,255,0.7)" font-weight="700">&#8942;</text>
      <text x="220" y="220" font-size="17" fill="rgba(255,255,255,0.7)" font-weight="700"><tspan font-style="italic">N</tspan> leaves</text>

      <!-- Leaf N -->
      <g transform="translate(330,282) rotate(5)">
        <ellipse cx="0" cy="0" rx="19" ry="7" fill="#5aad5a" fill-opacity="0.8" stroke="#2d6e2d" stroke-width="0.8"/>
        <text x="-10" y="5" font-size="13" fill="#fff" font-weight="700"><tspan font-style="italic">s</tspan><tspan font-size="10">N</tspan></text>
      </g>
      <line x1="330" y1="282" x2="326" y2="252" stroke="#ffffff" stroke-width="1.5" marker-end="url(#arrowNormA)" stroke-dasharray="3,2"/>
      <text x="302" y="250" font-size="14" fill="#ffffff" font-weight="700">&#937;<tspan font-size="10" dy="3">LN</tspan></text>

      <!-- Shadow plane -->
      <ellipse cx="315" cy="370" rx="130" ry="38" fill="url(#shadowPlaneA)" stroke="#a07840" stroke-width="1" stroke-dasharray="4,3"/>
      <g opacity="0.55">
        <ellipse cx="275" cy="363" rx="12" ry="4" fill="#704a1e" transform="rotate(-20,275,363)"/>
        <ellipse cx="310" cy="370" rx="10" ry="5" fill="#704a1e" transform="rotate(10,310,370)"/>
        <ellipse cx="345" cy="360" rx="13" ry="4" fill="#704a1e" transform="rotate(-30,345,360)"/>
        <ellipse cx="290" cy="377" rx="11" ry="4" fill="#704a1e" transform="rotate(25,290,377)"/>
        <ellipse cx="335" cy="380" rx="9" ry="4" fill="#704a1e" transform="rotate(-5,335,380)"/>
        <ellipse cx="360" cy="375" rx="10" ry="3" fill="#704a1e" transform="rotate(-40,360,375)"/>
        <ellipse cx="255" cy="375" rx="11" ry="4" fill="#704a1e" transform="rotate(15,255,375)"/>
        <ellipse cx="320" cy="358" rx="10" ry="4" fill="#704a1e" transform="rotate(-12,320,358)"/>
      </g>
      <text x="315" y="418" font-size="15" fill="#5a3a10" text-anchor="middle" font-weight="700">Shadow plane &#8869; &#937;</text>

      <!-- Volume labels — high contrast -->
      <text x="193" y="312" font-size="15" fill="#222" font-weight="600">d&#958;</text>
      <text x="452" y="194" font-size="14" fill="#222" font-weight="600">&#916;V = dS&#183;d&#958;</text>

      <!-- Annotation box — white background, dark text for maximum contrast -->
      <g transform="translate(14,100)">
        <rect x="0" y="0" width="164" height="90" rx="4" fill="#ffffff" stroke="#2c5f2d" stroke-width="1.2"/>
        <text x="82" y="20" text-anchor="middle" font-size="14" fill="#1a1a1a" font-weight="700">Sum each shadow:</text>
        <text x="82" y="43" text-anchor="middle" font-size="14" fill="#1a1a1a" font-weight="700">
          <tspan font-style="italic">s</tspan><tspan font-size="10">1</tspan>|&#937;<tspan font-size="9" dy="2">L1</tspan><tspan dy="-2">&#183;&#937;| + <tspan font-style="italic">s</tspan><tspan font-size="10">2</tspan>|&#937;<tspan font-size="9" dy="2">L2</tspan><tspan dy="-2">&#183;&#937;|</tspan></tspan>
        </text>
        <text x="82" y="63" text-anchor="middle" font-size="14" fill="#1a1a1a" font-weight="700">
          + &#8230; + <tspan font-style="italic">s</tspan><tspan font-size="10">N</tspan>|&#937;<tspan font-size="9" dy="2">LN</tspan><tspan dy="-2">&#183;&#937;|</tspan>
        </text>
        <text x="82" y="83" text-anchor="middle" font-size="13" fill="#555" font-weight="600">one term per leaf</text>
      </g>
    </svg>
  </div>

  <!-- Equation bar with stacked sigma -->
  <div class="equation-bar">
    <div class="eq-text">
      &#963; d&#958; =
      <span class="sigma-inline highlight-green">
        <span class="sigma-top"><em>N</em></span>
        <span class="sigma-sym">&#931;</span>
        <span class="sigma-bot"><em>i</em>=1</span>
      </span>
      <em>s</em><sub><em>i</em></sub>
      |<b>&#937;</b><sub>L<em>i</em></sub>
      &#183; <b>&#937;</b>| &#8725; dS
    </div>
  </div>
</div>

<!-- ====================== RIGHT PANEL ====================== -->
<div class="panel">
  <div class="panel-header">
    <div class="panel-title">Sum over <em>M</em> Solid Angle Bins</div>
  </div>
  <div class="panel-body">
    <svg viewBox="0 0 500 430" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="arrowNormB" markerWidth="7" markerHeight="5" refX="6" refY="2.5" orient="auto">
          <path d="M0,0 L7,2.5 L0,5 Z" fill="#065a82"/>
        </marker>
        <!-- Hemisphere shading gradient: lit from upper-left -->
        <radialGradient id="hemiFill" cx="35%" cy="30%" r="65%" fx="30%" fy="25%">
          <stop offset="0%" stop-color="#d0e8f5" stop-opacity="0.50"/>
          <stop offset="50%" stop-color="#a3cde2" stop-opacity="0.30"/>
          <stop offset="100%" stop-color="#6a9ab8" stop-opacity="0.18"/>
        </radialGradient>
        <!-- Specular highlight -->
        <radialGradient id="hemiHighlight" cx="30%" cy="25%" r="35%">
          <stop offset="0%" stop-color="#ffffff" stop-opacity="0.45"/>
          <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
        </radialGradient>
        <!-- Edge darkening -->
        <radialGradient id="hemiEdge" cx="50%" cy="50%" r="50%">
          <stop offset="60%" stop-color="#000000" stop-opacity="0"/>
          <stop offset="100%" stop-color="#3a6a8a" stop-opacity="0.15"/>
        </radialGradient>
        <!-- Base disc gradient -->
        <radialGradient id="baseDisc" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="#c8dce8" stop-opacity="0.25"/>
          <stop offset="100%" stop-color="#8aafca" stop-opacity="0.12"/>
        </radialGradient>
      </defs>

      <!-- ===== HEMISPHERE — 3D shaded ===== -->
      <!-- Shadow on ground -->
      <ellipse cx="254" cy="282" rx="185" ry="56" fill="#000" fill-opacity="0.04"/>

      <!-- Base disc (floor of hemisphere) -->
      <ellipse cx="250" cy="275" rx="180" ry="54" fill="url(#baseDisc)" stroke="#7eaec8" stroke-width="1.0"/>

      <!-- Back half of base (dashed, behind dome) -->
      <path d="M70,275 Q70,275 250,329 Q430,275 430,275" fill="none" stroke="#7eaec8" stroke-width="0.8" stroke-dasharray="5,3" opacity="0.5"/>

      <!-- Dome surface — main fill -->
      <path d="M70,275 Q70,95 250,75 Q430,95 430,275 Z" fill="url(#hemiFill)"/>
      <!-- Dome surface — highlight -->
      <path d="M70,275 Q70,95 250,75 Q430,95 430,275 Z" fill="url(#hemiHighlight)"/>
      <!-- Dome surface — edge darkening -->
      <path d="M70,275 Q70,95 250,75 Q430,95 430,275 Z" fill="url(#hemiEdge)"/>
      <!-- Dome outline -->
      <path d="M70,275 Q70,95 250,75 Q430,95 430,275" fill="none" stroke="#4a7fa0" stroke-width="1.8"/>

      <!-- Front half of base (solid, in front of dome) -->
      <path d="M70,275 Q70,275 250,221 Q430,275 430,275" fill="none" stroke="#7eaec8" stroke-width="1.0" opacity="0.6"/>

      <!-- Latitude grid lines — subtler on 3D surface -->
      <path d="M105,225 Q105,155 250,138 Q395,155 395,225" fill="none" stroke="#4a7fa0" stroke-width="0.7" stroke-dasharray="4,4" opacity="0.35"/>
      <path d="M138,185 Q138,128 250,112 Q362,128 362,185" fill="none" stroke="#4a7fa0" stroke-width="0.7" stroke-dasharray="4,4" opacity="0.35"/>

      <!-- Longitude grid lines -->
      <path d="M250,75 L250,275" stroke="#4a7fa0" stroke-width="0.7" stroke-dasharray="4,4" opacity="0.3"/>
      <path d="M250,75 Q172,118 142,275" stroke="#4a7fa0" stroke-width="0.7" stroke-dasharray="4,4" opacity="0.25"/>
      <path d="M250,75 Q328,118 358,275" stroke="#4a7fa0" stroke-width="0.7" stroke-dasharray="4,4" opacity="0.25"/>

      <!-- Bin 1: near zenith -->
      <path d="M228,84 Q250,76 272,84 Q270,98 250,103 Q230,98 228,84 Z"
            fill="#065a82" fill-opacity="0.55" stroke="#043d5c" stroke-width="1.3"/>
      <text x="250" y="97" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">L1</tspan></text>

      <!-- Bin 2 -->
      <path d="M150,155 Q172,130 205,136 Q198,160 176,170 Q154,167 150,155 Z"
            fill="#1c7293" fill-opacity="0.55" stroke="#135a74" stroke-width="1.3"/>
      <text x="176" y="157" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">L2</tspan></text>

      <!-- Bin 3 -->
      <path d="M302,133 Q324,125 348,142 Q340,164 318,167 Q300,160 302,133 Z"
            fill="#028090" fill-opacity="0.55" stroke="#026272" stroke-width="1.3"/>
      <text x="322" y="154" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">L3</tspan></text>

      <!-- Bin 4 -->
      <path d="M104,213 Q115,193 146,191 Q150,215 132,228 Q108,225 104,213 Z"
            fill="#00a896" fill-opacity="0.50" stroke="#008070" stroke-width="1.2"/>
      <text x="128" y="216" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">L4</tspan></text>

      <!-- Bin 5 -->
      <path d="M192,180 Q214,167 240,175 Q238,200 216,210 Q194,202 192,180 Z"
            fill="#065a82" fill-opacity="0.45" stroke="#043d5c" stroke-width="1"/>
      <text x="215" y="196" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">L5</tspan></text>

      <!-- Bin 6 (dots) -->
      <path d="M258,178 Q280,167 306,178 Q303,202 282,210 Q260,202 258,178 Z"
            fill="#1c7293" fill-opacity="0.40" stroke="#135a74" stroke-width="1"/>
      <text x="282" y="198" text-anchor="middle" font-size="16" fill="#fff" font-weight="700">&#8943;</text>

      <!-- Bin M -->
      <path d="M355,200 Q378,192 400,210 Q392,232 370,238 Q352,228 355,200 Z"
            fill="#028090" fill-opacity="0.50" stroke="#026272" stroke-width="1.2"/>
      <text x="375" y="223" text-anchor="middle" font-size="12" fill="#fff" font-weight="700">&#937;<tspan font-size="9">LM</tspan></text>

      <!-- Normal arrows -->
      <line x1="250" y1="275" x2="250" y2="100" stroke="#065a82" stroke-width="1.6" marker-end="url(#arrowNormB)"/>
      <line x1="250" y1="275" x2="174" y2="160" stroke="#1c7293" stroke-width="1.4" marker-end="url(#arrowNormB)"/>
      <line x1="250" y1="275" x2="322" y2="150" stroke="#028090" stroke-width="1.4" marker-end="url(#arrowNormB)"/>
      <line x1="250" y1="275" x2="128" y2="213" stroke="#00a896" stroke-width="1.3" marker-end="url(#arrowNormB)" opacity="0.85"/>
      <line x1="250" y1="275" x2="375" y2="218" stroke="#028090" stroke-width="1.3" marker-end="url(#arrowNormB)" opacity="0.85"/>

      <circle cx="250" cy="275" r="4" fill="#065a82"/>

      <text x="250" y="300" text-anchor="middle" font-size="15" fill="#222" font-weight="600">
        <tspan font-style="italic">M</tspan> solid angle bins tile the hemisphere
      </text>

      <!-- Callout box — white bg, dark text -->
      <g transform="translate(382,50)">
        <rect x="0" y="0" width="116" height="76" rx="4" fill="#ffffff" stroke="#065a82" stroke-width="1.2"/>
        <text x="58" y="18" text-anchor="middle" font-size="13" fill="#1a1a1a" font-weight="700">Bin &#937;<tspan font-size="10">L1</tspan> collects</text>
        <text x="58" y="35" text-anchor="middle" font-size="13" fill="#1a1a1a" font-weight="700">all leaves with</text>
        <text x="58" y="52" text-anchor="middle" font-size="13" fill="#1a1a1a" font-weight="700">normals near &#937;<tspan font-size="10">L1</tspan></text>
        <g transform="translate(14,58)">
          <ellipse cx="0" cy="0" rx="8" ry="3" fill="#4a9e4a" stroke="#2d6e2d" stroke-width="0.5" transform="rotate(-15)"/>
          <ellipse cx="22" cy="2" rx="7" ry="3" fill="#5aad5a" stroke="#2d6e2d" stroke-width="0.5" transform="rotate(10)"/>
          <ellipse cx="44" cy="-1" rx="8" ry="3" fill="#3d8e3d" stroke="#2d6e2d" stroke-width="0.5" transform="rotate(-25)"/>
          <ellipse cx="66" cy="1" rx="7" ry="3" fill="#4a9e4a" stroke="#2d6e2d" stroke-width="0.5" transform="rotate(5)"/>
        </g>
      </g>
      <line x1="382" y1="86" x2="272" y2="90" stroke="#666" stroke-width="0.8" stroke-dasharray="3,2"/>

      <!-- Key Idea box — white bg, dark text -->
      <g transform="translate(10,316)">
        <rect x="0" y="0" width="228" height="108" rx="4" fill="#ffffff" stroke="#065a82" stroke-width="1"/>
        <text x="114" y="22" text-anchor="middle" font-size="15" fill="#065a82" font-weight="700">Key Idea</text>
        <text x="114" y="42" text-anchor="middle" font-size="14" fill="#1a1a1a">Instead of counting <tspan font-style="italic">N</tspan> individual</text>
        <text x="114" y="60" text-anchor="middle" font-size="14" fill="#1a1a1a">leaves, group them into <tspan font-style="italic">M</tspan> bins</text>
        <text x="114" y="78" text-anchor="middle" font-size="14" fill="#1a1a1a">by orientation. Replace each</text>
        <text x="114" y="96" text-anchor="middle" font-size="14" fill="#1a1a1a">leaf area <tspan font-style="italic">s</tspan><tspan font-size="11">i</tspan> with the pdf <tspan font-style="italic">g</tspan><tspan font-size="11">L</tspan></text>
      </g>

      <!-- Transition box — white bg, dark text, stacked sigma -->
      <g transform="translate(252,316)">
        <rect x="0" y="0" width="236" height="108" rx="4" fill="#ffffff" stroke="#065a82" stroke-width="1"/>
        <text x="118" y="22" text-anchor="middle" font-size="15" fill="#1a1a1a" font-weight="700">Discrete &#8594; Continuous</text>

        <!-- Stacked Sigma -->
        <text x="42" y="46" font-size="12" fill="#065a82" font-weight="700" text-anchor="middle" font-style="italic">N</text>
        <text x="42" y="66" font-size="30" fill="#065a82" text-anchor="middle">&#931;</text>
        <text x="42" y="82" font-size="11" fill="#065a82" text-anchor="middle" font-style="italic">i=1</text>

        <text x="78" y="66" font-size="22" fill="#1a1a1a" text-anchor="middle">&#8594;</text>

        <!-- Stacked Integral -->
        <text x="112" y="66" font-size="30" fill="#065a82" text-anchor="middle">&#8747;</text>
        <text x="112" y="82" font-size="11" fill="#065a82" text-anchor="middle" font-weight="600">2&#960;</text>

        <text x="142" y="66" font-size="16" fill="#065a82" text-anchor="start">d<tspan font-weight="700">&#937;</tspan><tspan font-size="12">L</tspan></text>

        <text x="118" y="100" text-anchor="middle" font-size="14" fill="#1a1a1a">
          <tspan font-style="italic">s</tspan><tspan font-size="11">i</tspan>/<tspan font-style="italic">S</tspan><tspan font-size="11">o</tspan>
          &#8594; (1/2&#960;) <tspan font-style="italic">g</tspan><tspan font-size="11">L</tspan>(&#937;<tspan font-size="11">L</tspan>) d&#937;<tspan font-size="11">L</tspan>
        </text>
      </g>
    </svg>
  </div>

  <!-- Equation bar -->
  <div class="equation-bar">
    <div class="eq-text">
      &#963; d&#958; = (S<sub>o</sub>/dS) &#183; (1/2&#960;)
      <span class="int-inline highlight-blue">
        <span class="int-top">.</span>
        <span class="int-sym">&#8747;</span>
        <span class="int-bot">2&#960;</span>
      </span>
      <em>g</em><sub>L</sub>(<b>&#937;</b><sub>L</sub>)
      |<b>&#937;</b><sub>L</sub> &#183; <b>&#937;</b>|
      d<b>&#937;</b><sub>L</sub>
    </div>
  </div>
</div>

</div>

<!-- CAPTION -->
<div class="caption-box">
  <div class="caption-label">Figure Caption</div>
  <div class="caption-text">
    <strong>Two equivalent ways to compute the extinction cross-section &#963; of a vegetation canopy
    modeled as a turbid medium.</strong>
    <span class="green">Left panel</span> shows the direct approach: each of the <em>N</em> leaf elements
    (areas <em>s</em><sub>1</sub>, <em>s</em><sub>2</sub>, &#8230;, <em>s</em><sub>N</sub>) in the elementary volume
    is individually projected onto a plane perpendicular to the photon travel direction <b>&#937;</b>,
    and their shadow areas are summed term by term.
    The projection of leaf <em>i</em> with normal <b>&#937;</b><sub>L<em>i</em></sub> contributes
    <em>s</em><sub><em>i</em></sub> |<b>&#937;</b><sub>L<em>i</em></sub> &#183; <b>&#937;</b>| to the total shadow.
    This is exact but impractical when <em>N</em> is large.
    <span class="blue">Right panel</span> shows the efficient alternative: instead of enumerating leaves one by one,
    the upper hemisphere of leaf normal directions is partitioned into <em>M</em> solid angle bins,
    each collecting all leaves whose normals fall within that bin.
    The fractional area of leaves in bin <b>&#937;</b><sub>L<em>i</em></sub> is expressed through the
    leaf angle probability density <em>g</em><sub>L</sub>(<b>&#937;</b><sub>L</sub>),
    so the discrete sum over <em>N</em> leaves becomes a continuous integral over the hemisphere.
    This yields the extinction coefficient &#963; = <em>u</em><sub>L</sub> &#183; <em>G</em>,
    where <em>u</em><sub>L</sub> is the leaf area density
    and <em>G</em> is the Ross&#8211;Nilson geometry function (the mean projection of unit leaf area
    onto a plane perpendicular to <b>&#937;</b>).
  </div>
</div>

</div>
</body>
</html>
